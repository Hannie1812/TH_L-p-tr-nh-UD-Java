<!doctype html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Qu·∫£n L√Ω Ng∆∞·ªùi D√πng - Hannie Book</title>
  <th:block th:replace="~{layout :: link-css}"></th:block>
  <th:block th:replace="~{layout::custom-css}"></th:block>
</head>

<body>
  <th:block th:replace="~{layout :: header}"></th:block>
  <div class="container py-5">
    <div class="row">
      <div class="col-12">
        <div class="d-flex justify-content-between align-items-center mb-4 animate-slide-up">
          <div>
            <h3 class="gradient-text mb-1">üë• Qu·∫£n L√Ω Ng∆∞·ªùi D√πng</h3>
            <p class="text-secondary mb-0">Qu·∫£n l√Ω t√†i kho·∫£n v√† ph√¢n quy·ªÅn trong h·ªá th·ªëng</p>
          </div>
          <a href="/admin/users/add" class="btn btn-primary shadow-sm">
            ‚ûï Th√™m Ng∆∞·ªùi D√πng
          </a>
        </div>

        <div th:if="${success}" class="alert alert-success animate-fade-in" role="alert">
          <strong>‚úì</strong> <span th:text="${success}"></span>
        </div>

        <div class="card shadow-lg animate-slide-up overflow-hidden" style="animation-delay: 0.1s;">
          <div class="card-body p-0">
            <div class="table-responsive">
              <table class="table table-hover align-middle mb-0">
                <thead class="table-light">
                  <tr>
                    <th class="ps-4">ID</th>
                    <th>T√™n ng∆∞·ªùi d√πng</th>
                    <th>Email</th>
                    <th>S·ªë ƒëi·ªán tho·∫°i</th>
                    <th>Vai tr√≤</th>
                    <th class="text-center">H√†nh ƒë·ªông</th>
                  </tr>
                </thead>
                <tbody>
                  <tr th:each="user : ${users}">
                    <td class="ps-4" th:text="${user.id}" style="font-weight: 600;"></td>
                    <td>
                      <strong th:text="${user.username}"></strong>
                    </td>
                    <td th:text="${user.email}"></td>
                    <td>
                      <span th:text="${user.phone != null && !user.phone.isEmpty()} ? ${user.phone} : '-'"
                        class="text-secondary"></span>
                    </td>
                    <td>
                      <span th:each="role : ${user.roles}" class="badge me-1" th:text="${role.name}"
                        th:classappend="${role.name == 'ADMIN'} ? 'bg-danger' : 'bg-primary'"
                        style="padding: 0.4rem 0.8rem;"></span>
                    </td>
                    <td class="text-center pe-4">
                      <div class="d-inline-flex gap-2">
                        <a th:href="@{'/admin/users/edit/' + ${user.id}}"
                          class="btn btn-sm btn-outline-warning text-dark">
                          S·ª≠a
                        </a>
                        <form th:action="@{'/admin/users/delete/' + ${user.id}}" method="post" class="d-inline"
                          onsubmit="return confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a ng∆∞·ªùi d√πng n√†y?')">
                          <button type="submit" class="btn btn-sm btn-outline-danger">
                            X√≥a
                          </button>
                        </form>
                      </div>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>

        <div th:if="${users.isEmpty()}" class="text-center py-5">
          <div style="font-size: 4rem; opacity: 0.2;">üë•</div>
          <p class="text-secondary mt-3">Kh√¥ng t√¨m th·∫•y ng∆∞·ªùi d√πng n√†o</p>
        </div>
      </div>
    </div>
  </div>
  <th:block th:replace="~{layout :: footer}"></th:block>
</body>

</html>