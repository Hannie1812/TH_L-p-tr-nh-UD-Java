<!doctype html>
<html xmlns:th="http://www.thymeleaf.org" lang="vi">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Gi·ªè H√†ng - Hannie Book</title>
  <th:block th:replace="~{layout::link-css}"></th:block>
  <th:block th:replace="~{layout::custom-css}"></th:block>
</head>

<body>
  <th:block th:replace="~{layout::header}"></th:block>

  <div class="container mt-4">
    <h1 class="gradient-text mb-4 text-center">Gi·ªè H√†ng C·ªßa B·∫°n</h1>

    <div th:if="${not #lists.isEmpty(cart.cartItems)}">
      <div class="card shadow-sm mb-4">
        <div class="table-responsive">
          <table class="table table-hover align-middle mb-0">
            <thead class="table-light">
              <tr>
                <th scope="col" class="ps-4">ID S√°ch</th>
                <th scope="col">T√™n S√°ch</th>
                <th scope="col" style="width: 151px;">S·ªë l∆∞·ª£ng</th>
                <th scope="col">ƒê∆°n gi√°</th>
                <th scope="col">Th√†nh ti·ªÅn</th>
                <th scope="col" class="text-center">H√†nh ƒë·ªông</th>
              </tr>
            </thead>
            <tbody>
              <tr th:each="item : ${cart.cartItems}">
                <td class="ps-4" th:text="${item.getBookId()}"></td>
                <td class="fw-bold" th:text="${item.getBookName()}"></td>
                <td>
                  <div class="input-group input-group-sm">
                    <button class="btn btn-outline-secondary" type="button" onclick="updateQuantity(this, -1)"
                      th:attr="data-id=${item.getBookId()}">-</button>
                    <input type="number" min="1" th:value="${item.getQuantity()}" th:attr="data-id=${item.getBookId()}"
                      class="form-control text-center quantity" readonly />
                    <button class="btn btn-outline-secondary" type="button" onclick="updateQuantity(this, 1)"
                      th:attr="data-id=${item.getBookId()}">+</button>
                  </div>
                </td>
                <td th:text="${item.getPrice() + ' VNƒê'}"></td>
                <td class="fw-bold text-primary" th:text="${(item.getPrice() * item.getQuantity()) + ' VNƒê'}"></td>
                <td class="text-center">
                  <a class="btn btn-sm btn-outline-danger"
                    th:href="@{/cart/removeFromCart/{id}(id=${item.getBookId()})}">
                    X√≥a
                  </a>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <div class="row align-items-center">
        <div class="col-md-6 mb-3 mb-md-0">
          <h3 class="mb-0">T·ªïng c·ªông: <span class="text-primary" th:text="${totalPrice + ' VNƒê'}"></span></h3>
        </div>
        <div class="col-md-6 text-md-end">
          <a class="btn btn-outline-danger me-2" th:href="@{/cart/clearCart}">X√≥a gi·ªè h√†ng</a>
          <a class="btn btn-success px-4 shadow-sm" th:href="@{/cart/checkout}">Thanh to√°n ngay</a>
        </div>
      </div>
    </div>

    <div th:if="${#lists.isEmpty(cart.cartItems)}" class="text-center py-5">
      <div class="mb-4" style="font-size: 4rem;">üõí</div>
      <h3>Gi·ªè h√†ng c·ªßa b·∫°n ƒëang tr·ªëng</h3>
      <p class="text-muted mb-4">H√£y ch·ªçn nh·ªØng cu·ªën s√°ch y√™u th√≠ch c·ªßa b·∫°n v√† th√™m v√†o gi·ªè h√†ng nh√©!</p>
      <a class="btn btn-primary px-4 shadow-sm" href="/books">Ti·∫øp t·ª•c mua s·∫Øm</a>
    </div>
  </div>

  <th:block th:replace="~{layout::footer}"></th:block>
  <script th:src="@{/js/cart.js}"></script>
</body>

</html>